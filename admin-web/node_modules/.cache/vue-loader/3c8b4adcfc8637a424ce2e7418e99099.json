{"remainingRequest":"C:\\ttt6-luckinsho2\\admin-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\ttt6-luckinsho2\\admin-web\\src\\components\\marketing\\Advertisement.vue?vue&type=style&index=0&id=3a4751dc&scoped=true&lang=css&","dependencies":[{"path":"C:\\ttt6-luckinsho2\\admin-web\\src\\components\\marketing\\Advertisement.vue","mtime":1574242229179},{"path":"C:\\ttt6-luckinsho2\\admin-web\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\ttt6-luckinsho2\\admin-web\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\ttt6-luckinsho2\\admin-web\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\ttt6-luckinsho2\\admin-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\ttt6-luckinsho2\\admin-web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLmlucHV0LXdpZHRoIHsKICB3aWR0aDogMjAzcHg7Cn0K"},{"version":3,"sources":["Advertisement.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAybA;AACA;AACA","file":"Advertisement.vue","sourceRoot":"src/components/marketing","sourcesContent":["<template>\r\n  <div>\r\n    <!--导航栏-->\r\n    <el-row :gutter=\"12\">\r\n      <el-col :span=\"24\">\r\n        <el-card shadow=\"always\">\r\n          <el-row :gutter=\"12\">\r\n            <el-col :span=\"4\">\r\n              <el-breadcrumb separator-class=\"el-icon-arrow-right\">\r\n                <el-breadcrumb-item :to=\"{ path: '/' }\">首页</el-breadcrumb-item>\r\n                <el-breadcrumb-item>广告列表</el-breadcrumb-item>\r\n              </el-breadcrumb>\r\n            </el-col>\r\n          </el-row>\r\n        </el-card>\r\n      </el-col>\r\n    </el-row>\r\n    <!--搜索栏-->\r\n    <el-row :gutter=\"12\" style=\"margin-top: 20px\">\r\n      <el-col :span=\"24\">\r\n        <el-card shadow=\"always\">\r\n          <el-row>\r\n            <el-col>\r\n              <el-form :inline=\"true\" :model=\"queryParams\" size=\"small\" label-width=\"140px\">\r\n                <el-form-item label=\"广告名称：\">\r\n                  <el-input v-model=\"queryParams.name\" class=\"input-width\" placeholder=\"请输入名称\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"投放平台：\">\r\n                  <el-select v-model=\"queryParams.platform\" placeholder=\"全部\" clearable class=\"input-width\">\r\n                    <el-option v-for=\"item in platformOptions\"\r\n                               :key=\"item.value\"\r\n                               :label=\"item.label\"\r\n                               :value=\"item.value\">\r\n                    </el-option>\r\n                  </el-select>\r\n                </el-form-item>\r\n                <el-form-item label=\"广告位置：\">\r\n                  <el-select v-model=\"queryParams.location\" placeholder=\"全部\" clearable class=\"input-width\">\r\n                    <el-option v-for=\"item in locationOptions\"\r\n                               :key=\"item.value\"\r\n                               :label=\"item.label\"\r\n                               :value=\"item.value\">\r\n                    </el-option>\r\n                  </el-select>\r\n                </el-form-item>\r\n                <el-form-item label=\"广告状态：\">\r\n                  <el-select v-model=\"queryParams.status\" placeholder=\"全部\" clearable class=\"input-width\">\r\n                    <el-option v-for=\"item in statusOptions\"\r\n                               :key=\"item.value\"\r\n                               :label=\"item.label\"\r\n                               :value=\"item.value\">\r\n                    </el-option>\r\n                  </el-select>\r\n                </el-form-item>\r\n                <el-form-item>\r\n                  <el-button @click=\"handleSearch\" type=\"primary\">查询</el-button>\r\n                </el-form-item>\r\n              </el-form>\r\n            </el-col>\r\n          </el-row>\r\n        </el-card>\r\n      </el-col>\r\n    </el-row>\r\n    <!--数据表格-->\r\n    <el-row :gutter=\"12\" style=\"margin-top: 20px\">\r\n      <el-col :span=\"24\">\r\n        <el-table\r\n          :data=\"advertisementList\"\r\n          style=\"width: 100%\"\r\n          tooltip-effect=\"dark\">\r\n          <el-table-column\r\n            align=\"center\"\r\n            label=\"编号\" width=\"100\">\r\n            <template slot-scope=\"scope\">{{ scope.row.id }}</template>\r\n          </el-table-column>\r\n          <el-table-column label=\"广告名称\" align=\"center\" width=\"250\">\r\n            <template slot-scope=\"scope\">{{scope.row.name}}</template>\r\n          </el-table-column>\r\n          <el-table-column label=\"投放平台\" width=\"100\" align=\"center\">\r\n            <template slot-scope=\"scope\">{{scope.row.platform | formatPlatform}}</template>\r\n          </el-table-column>\r\n          <el-table-column label=\"广告位置\" width=\"100\" align=\"center\">\r\n            <template slot-scope=\"scope\">{{scope.row.location | formatLocation}}</template>\r\n          </el-table-column>\r\n          <el-table-column label=\"广告图片\" width=\"250\" align=\"center\">\r\n            <template slot-scope=\"scope\"><img style=\"height: 80px\" :src=\"baseUrl+scope.row.image\"></template>\r\n          </el-table-column>\r\n          <el-table-column label=\"广告链接\" width=\"200\" align=\"center\">\r\n            <template slot-scope=\"scope\">{{scope.row.spuCode}}</template>\r\n          </el-table-column>\r\n          <el-table-column label=\"有效期\" width=\"250\" align=\"center\">\r\n            <template slot-scope=\"scope\">{{scope.row.startTime |formatDate}}至{{scope.row.endTime |formatDate}}</template>\r\n          </el-table-column>\r\n          <el-table-column label=\"上下线\" width=\"100\" align=\"center\">\r\n            <template slot-scope=\"scope\">{{scope.row.status | formatStatus}}</template>\r\n          </el-table-column>\r\n          <el-table-column\r\n            align=\"center\"\r\n            label=\"操作\">\r\n            <template slot-scope=\"scope\">\r\n              <el-button type=\"primary\" plain size=\"small\" @click=\"handleEdit(scope.$index,scope.row)\">编辑</el-button>\r\n               <!-- <el-button type=\"danger\" plain size=\"small\" v-if=\"scope.row.status == 1\" @click=\"handleChangeStatus(scope.$index,scope.row)\">下线</el-button>\r\n              <el-button type=\"danger\" plain size=\"small\" v-if=\"scope.row.status == 2\" @click=\"handleChangeStatus(scope.$index,scope.row)\">上线</el-button>-->\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n      </el-col>\r\n    </el-row>\r\n    <el-dialog>\r\n\r\n    </el-dialog>\r\n    <!--分页-->\r\n    <el-row :gutter=\"12\" style=\"margin-top: 20px\">\r\n      <el-col :span=\"24\">\r\n        <el-card shadow=\"always\">\r\n          <el-row :gutter=\"12\">\r\n            <el-col :offset=\"10\" :span=\"12\">\r\n              <div class=\"block\">\r\n                <el-pagination\r\n                  :current-page=currentPage\r\n                  :page-size=pageSize\r\n                  :page-sizes=\"[1, 5, 10, 15, 20, 30]\"\r\n                  :total=total\r\n                  @current-change=\"handleCurrentChange\"\r\n                  @size-change=\"handleSizeChange\"\r\n                  background\r\n                  layout=\"total, sizes, prev, pager, next, jumper\">\r\n                </el-pagination>\r\n              </div>\r\n            </el-col>\r\n          </el-row>\r\n        </el-card>\r\n      </el-col>\r\n    </el-row>\r\n    <el-dialog title=\"编辑广告\" :visible.sync=\"editDialogVisible\" style=\"text-align: left\">\r\n      <el-form :model=\"editForm\"\r\n               :rules=\"rules\"\r\n               ref=\"couponFrom\"\r\n               label-width=\"150px\"\r\n               size=\"small\">\r\n        <el-form-item label=\"投放平台：\">\r\n          <el-select v-model=\"editForm.platform\" collapse-tags>\r\n            <el-option\r\n              v-for=\"type in platformOptions\"\r\n              :key=\"type.value\"\r\n              :label=\"type.label\"\r\n              :value=\"type.value\">\r\n            </el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"广告位置：\">\r\n          <el-select v-model=\"editForm.location\" collapse-tags>\r\n            <el-option\r\n              v-for=\"type in locationOptions\"\r\n              :key=\"type.value\"\r\n              :label=\"type.label\"\r\n              :value=\"type.value\">\r\n            </el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"名称：\" prop=\"name\">\r\n          <el-input v-model=\"editForm.name\" class=\"input-width\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"有效期：\">\r\n          <el-date-picker type=\"datetime\" placeholder=\"选择日期\" v-model=\"editForm.startTime\" style=\"width: 150px\"></el-date-picker>\r\n          <span style=\"margin-left: 20px;margin-right: 20px\">至</span>\r\n          <el-date-picker type=\"datetime\" placeholder=\"选择日期\" v-model=\"editForm.endTime\" style=\"width: 150px\"></el-date-picker>\r\n        </el-form-item>\r\n        <el-form-item label=\"广告图片：\" v-model=\"editForm.image\">\r\n          <img style=\"height: 80px\" :src=\"baseUrl+editForm.image\">\r\n          <el-button type=\"text\" style=\"margin-top:-30px\" @click=\"changeImageVisible=true\">修改图片</el-button>\r\n        </el-form-item>\r\n        <el-form-item label=\"排序：\" prop = \"sort\">\r\n          <el-input v-model=\"editForm.sort\" class=\"input-width\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"广告链接：\" prop=\"url\">\r\n          <el-input v-model=\"editForm.spuCode\" class=\"input-width\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"是否上线\" >\r\n          <el-radio-group v-model=\"editForm.status\">\r\n            <el-radio :label=\"1\">是</el-radio>\r\n            <el-radio :label=\"2\">否</el-radio>\r\n          </el-radio-group>\r\n        </el-form-item>\r\n        <el-form-item label=\"备注：\">\r\n          <el-input\r\n            class=\"input-width\"\r\n            type=\"textarea\"\r\n            :rows=\"5\"\r\n            placeholder=\"请输入内容\"\r\n            v-model=\"editForm.note\">\r\n          </el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\" style=\"text-align: center\">\r\n        <el-button @click=\"editDialogVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"handleSaveEdit()\">保存修改</el-button>\r\n      </div>\r\n    </el-dialog>\r\n    <el-dialog title=\"点击修改图片\" :visible.sync=\"changeImageVisible\">\r\n      <el-upload\r\n        class=\"avatar-uploader\"\r\n        action=\"http://adminweb.luckinshop.com:8080/adminback/uploadImage\"\r\n        :show-file-list=\"false\"\r\n        :on-success=\"handleImageSuccess\"\r\n        :on-preview=\"handlePreview\"\r\n        :before-upload=\"beforeImageUpload\"\r\n        v-model=\"editForm.image\">\r\n        <img v-if=\"editForm.image\" :src=\"baseUrl+editForm.image\" class=\"avatar\" style=\"height: 80px\">\r\n        <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\r\n      </el-upload>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getAdvertisementList,changeAdvertisementStatus,editAdvertisement } from '@/api/marketing'\r\nimport { formatDate } from '@/utils/date'\r\n\r\nexport default {\r\n  created () {\r\n    this.handleGetAdvertisementList()\r\n  },\r\n  mounted () {\r\n  },\r\n  filters: {\r\n    formatLocation (location) {\r\n      if (location === 1) {\r\n        return '首页轮播'\r\n      } else if (location === 2) {\r\n        return '左侧'\r\n      } else if (location === 3){\r\n        return '右侧'\r\n      }else{\r\n          return '底部'\r\n      }\r\n    },\r\n      formatPlatform (platform) {\r\n          if (platform === 1) {\r\n              return '小程序'\r\n          } else if (platform === 2) {\r\n              return 'PC'\r\n          } else {\r\n              return 'APP'\r\n          }\r\n      },\r\n    formatDate (time) {\r\n      if (time == null || time === '') {\r\n        return '-'\r\n      }\r\n      let date = new Date(time)\r\n      return formatDate(date, 'yyyy-MM-dd mm:ss')\r\n    },\r\n    formatStatus (status) {\r\n      if (status === 1) {\r\n        return '已上线'\r\n      } else {\r\n        return '下线'\r\n      }\r\n    },\r\n    formatExpire (endTime) {\r\n      let now = new Date().getTime()\r\n      let endDate = new Date(endTime)\r\n      if (endDate > now) {\r\n        return '未过期'\r\n      } else {\r\n        return '已过期'\r\n      }\r\n    }\r\n  },\r\n  data () {\r\n    return {\r\n        arr:[],\r\n        baseUrl:'http://10.104.131.160/',\r\n      locationOptions: [\r\n        {\r\n          label: '首页轮播',\r\n          value: 1\r\n        },\r\n        {\r\n          label: '左侧',\r\n          value: 2\r\n        },\r\n        {\r\n          label: '右侧',\r\n          value: 3\r\n        },\r\n      {\r\n          label: '底部',\r\n          value: 4\r\n      }\r\n      ],\r\n      statusOptions: [\r\n        {\r\n          label: '已上线',\r\n          value: 1\r\n        },\r\n        {\r\n          label: '下线',\r\n          value: 2\r\n        }\r\n      ],\r\n        platformOptions: [\r\n            {\r\n                label: '小程序',\r\n                value: 1\r\n            },\r\n            {\r\n                label: 'PC',\r\n                value: 2\r\n            },\r\n            {\r\n                label: 'APP',\r\n                value: 3\r\n            }\r\n        ],\r\n      // 搜索栏\r\n      name: '',\r\n      // 优惠券数组\r\n      advertisementList: [],\r\n      queryParams: {\r\n        pageNum: 1,\r\n        pageSize: 5,\r\n        name: '',\r\n        location: null,\r\n        status: null\r\n      },\r\n      addCouponForm: {},\r\n      // 每页几条数据\r\n      pageSize: 5,\r\n      // 总数\r\n      total: 0,\r\n      // 当前页\r\n      currentPage: 1,\r\n      editDialogVisible: false,\r\n      editForm:{},\r\n        changeImageVisible:false\r\n    }\r\n  },\r\n  methods: {\r\n      handleShowButton(){\r\n          this.arr =  localStorage.getItem(\"ButtonList\");\r\n      },\r\n      handleImageSuccess(response) {\r\n          console.log(response)\r\n          this.editForm.image = response.data;\r\n      },\r\n      beforeImageUpload(file) {\r\n          /*console.log(\"确定图片格式及大小\")\r\n          const isJPG = file.type === 'image/jpeg';*/\r\n          const isLt2M = file.size / 1024 / 1024 < 2;\r\n          if (!isLt2M) {\r\n              this.$message.error('上传图片大小不能超过 2MB!');\r\n          }\r\n          return isLt2M;\r\n      },\r\n      handlePreview(file) {\r\n          console.log(file);\r\n      },\r\n      handleEdit(index, row){\r\n          this.editForm={\r\n              id:row.id,\r\n              name:row.name,\r\n              platform:row.platform,\r\n              location:row.location,\r\n              spuCode:row.spuCode,\r\n              image:row.image,\r\n              note:row.note,\r\n              status:row.status,\r\n              sort:row.sort,\r\n              startTime:row.startTime,\r\n              endTime:row.endTime\r\n          }\r\n          this.editDialogVisible = true\r\n      },\r\n      handleSaveEdit(){\r\n          let params = this.editForm;\r\n          console.log(params)\r\n          editAdvertisement(params).then(res => {\r\n              if (res.code === 0) {\r\n                  this.$message({\r\n                      message: '修改成功',\r\n                      type: 'success'\r\n                  })\r\n\r\n                  this.editForm = {}\r\n                  this.handleGetAdvertisementList();\r\n                  this.editDialogVisible = false\r\n              }\r\n          })\r\n      },\r\n    // 每页几条数据变化\r\n    handleSizeChange (val) {\r\n      this.pageSize = val\r\n    },\r\n    // 当前页变化\r\n    handleCurrentChange (val) {\r\n      this.currentPage = val\r\n      this.handleGetAdvertisementList()\r\n    },\r\n    // 查询按钮\r\n    handleSearch () {\r\n      this.currentPage = 1\r\n      this.handleGetAdvertisementList()\r\n    },\r\n      handleChangeStatus(index,row){\r\n        let params=\"id=\"+row.id\r\n          changeAdvertisementStatus(params).then(res=>{\r\n              if(res.code===0){\r\n                  this.$message({\r\n                      message: '修改成功',\r\n                      type: 'success'\r\n                  })\r\n                  this.handleGetAdvertisementList();\r\n              } else {\r\n                  this.$message({\r\n                      message: '修改失败',\r\n                      type: 'fail'\r\n                  })\r\n              }\r\n          })\r\n\r\n      },\r\n\r\n    // 获取广告列表\r\n    handleGetAdvertisementList () {\r\n      this.queryParams.pageNum = this.currentPage\r\n      this.queryParams.pageSize = this.pageSize\r\n      getAdvertisementList(this.queryParams).then(res => {\r\n        if (res.code === 0) {\r\n          this.advertisementList = res.data.content\r\n          this.total = res.data.count\r\n        }\r\n      })\r\n    }\r\n\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n  .input-width {\r\n    width: 203px;\r\n  }\r\n</style>\r\n"]}]}