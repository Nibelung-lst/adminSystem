{"remainingRequest":"C:\\system\\admin-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\system\\admin-web\\src\\components\\admin\\Employee.vue?vue&type=style&index=0&id=5b174c9e&lang=scss&scoped=true&","dependencies":[{"path":"C:\\system\\admin-web\\src\\components\\admin\\Employee.vue","mtime":1585465267977},{"path":"C:\\system\\admin-web\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\system\\admin-web\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"C:\\system\\admin-web\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\system\\admin-web\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\system\\admin-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\system\\admin-web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoudGltZSB7CiAgZm9udC1zaXplOiAxM3B4OwogIGNvbG9yOiAjOTk5Owp9CgouYm90dG9tIHsKICBtYXJnaW4tdG9wOiAxM3B4OwogIGxpbmUtaGVpZ2h0OiAxMnB4Owp9CgouYnV0dG9uIHsKICBwYWRkaW5nOiAwOwogIGZsb2F0OiByaWdodDsKfQoKLmltYWdlIHsKICB3aWR0aDogMTAwJTsKICBkaXNwbGF5OiBibG9jazsKfQoKLmNsZWFyZml4OmJlZm9yZSwKLmNsZWFyZml4OmFmdGVyIHsKICBkaXNwbGF5OiB0YWJsZTsKICBjb250ZW50OiAiIjsKfQoKLmNsZWFyZml4OmFmdGVyIHsKICBjbGVhcjogYm90aAp9Cg=="},{"version":3,"sources":["Employee.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyRA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"Employee.vue","sourceRoot":"src/components/admin","sourcesContent":["<template xmlns:el-col=\"http://www.w3.org/1999/html\">\r\n  <main>\r\n    <el-row :gutter=\"12\">\r\n      <el-col :span=\"24\">\r\n        <el-card shadow=\"always\">\r\n          <el-row :gutter=\"12\">\r\n            <el-col :span=\"4\">\r\n              <el-breadcrumb separator-class=\"el-icon-arrow-right\">\r\n                <el-breadcrumb-item :to=\"{ path: '/' }\">首页</el-breadcrumb-item>\r\n                <el-breadcrumb-item>系统列表</el-breadcrumb-item>\r\n              </el-breadcrumb>\r\n            </el-col>\r\n          </el-row>\r\n        </el-card>\r\n      </el-col>\r\n    </el-row>\r\n    <!--搜索栏-->\r\n    <el-row :gutter=\"12\" style=\"margin-top: 20px\">\r\n      <el-col :span=\"24\">\r\n        <el-card shadow=\"always\">\r\n          <el-row :gutter=\"20\">\r\n            <el-col :span=\"6\">\r\n              <el-button type=\"primary\" plain size=\"small\" @click=\"handleAddSystem()\">新建菜单</el-button>\r\n            </el-col>\r\n            <el-col :span=\"6\":offset=\"6\">\r\n              <el-input\r\n                placeholder=\"输入菜单名搜索\"\r\n                suffix-icon=\"el-icon-date\"\r\n                v-model=\"input1\">\r\n              </el-input>\r\n            </el-col>\r\n            <el-col :span=\"6\">\r\n              <el-button type=\"primary\" plain size=\"small\" @click=\"handleDelet()\">搜索</el-button>\r\n            </el-col>\r\n          </el-row>\r\n        </el-card>\r\n      </el-col>\r\n    </el-row>\r\n\r\n    <el-row>\r\n      <el-col :span=\"8\" v-for=\"(o, index) in 2\" :key=\"o\" :offset=\"index > 0 ? 2 : 0\">\r\n        <el-card :body-style=\"{ padding: '12px'} \">\r\n          <img src=\"https://shadow.elemecdn.com/app/element/hamburger.9cf7b091-55e9-11e9-a976-7f4d0b07eef6.png\" class=\"image\">\r\n          <div style=\"padding: 14px;\">\r\n            <span>好吃的汉堡</span>\r\n            <div class=\"bottom clearfix\">\r\n              <time class=\"time\">{{ currentDate }}</time>\r\n              <el-button type=\"text\" class=\"button\">操作按钮</el-button>\r\n            </div>\r\n          </div>\r\n        </el-card>\r\n      </el-col>\r\n    </el-row>\r\n\r\n    <el-dialog\r\n      title=\"新建系统菜单\"\r\n      :visible.sync=\"dialogSystem\"\r\n      :before-close=\"handleClose\">\r\n      <el-form ref=\"sizeForm\"\r\n               :model=\"sizeForm\"\r\n               :rules=\"rules\"\r\n               label-width=\"80px\" size=\"mini\">\r\n        <el-form-item label=\"菜单名\" prop=\"name\">\r\n          <el-input v-model=\"sizeForm.name\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"菜单路径\" prop=\"url\">\r\n          <el-input v-model=\"sizeForm.url\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"菜单描述\" prop=\"component\">\r\n          <el-input v-model=\"sizeForm.component\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item size=\"large\">\r\n          <el-button type=\"primary\" @click=\"onSubmit\">立即创建</el-button>\r\n          <el-button>取消</el-button>\r\n        </el-form-item>\r\n      </el-form>\r\n    </el-dialog>\r\n\r\n    <el-dialog\r\n      title=\"分配菜单给相应角色\"\r\n      :visible.sync=\"dialogVisible\"\r\n      :before-close=\"handleClose\">\r\n      <el-card shadow=\"always\">\r\n        <el-row :gutter=\"20\">\r\n          <el-col :span=\"6\":offset=\"6\">\r\n            <el-input\r\n              placeholder=\"输入角色名\"\r\n              suffix-icon=\"el-icon-date\"\r\n              v-model=\"input2\">\r\n            </el-input>\r\n          </el-col>\r\n          <el-col :span=\"6\">\r\n            <el-button type=\"primary\" plain size=\"small\" @click=\"handleRoleSearch()\">搜索</el-button>\r\n          </el-col>\r\n        </el-row>\r\n      </el-card>\r\n      <el-table\r\n        :data=\"roleDate\"\r\n        border\r\n        style=\"width: 100%\">\r\n        <el-table-column\r\n          prop=\"name\"\r\n          label=\"英文名\"\r\n          width=\"250\">\r\n        </el-table-column>\r\n        <el-table-column\r\n          prop=\"nameZh\"\r\n          label=\"中文名\"\r\n          width=\"250\">\r\n        </el-table-column>\r\n        <el-table-column\r\n          prop=\"address\"\r\n          label=\"操作\">\r\n          <template slot-scope=\"scope\">\r\n            <el-button type=\"primary\" plain size=\"small\" @click=\"authority(scope.row)\" :disabled=\"buttonStatue\" >分配权限</el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n\r\n    </el-dialog>\r\n\r\n  </main>\r\n\r\n</template>\r\n\r\n<script>\r\n\r\n  import {\r\n    addAuthority, addMenu,\r\n    checkSystemName,\r\n    checkSystemUrl,\r\n    listMenu,\r\n    listRole,\r\n    listRoleByMid,\r\n    searchRoleByName\r\n  } from \"../../api/admin\";\r\n\r\n  export default {\r\n    mounted () {\r\n      this.send()\r\n    },\r\n    name: 'employee',\r\n    inject:['reload'],\r\n    data () {\r\n      let checkName = (rule, value, callback) =>{\r\n        checkSystemName(value).then(res=>{\r\n          if ( res && res.data === true){\r\n            console.log(\"true\")\r\n            callback(\"该系统名已存在\")\r\n          }else if(res && res.data === false){\r\n            callback()\r\n          }\r\n        })\r\n      }\r\n      let checkUrl = (rule, value, callback) =>{\r\n        checkSystemUrl(value).then(res=>{\r\n          if ( res && res.data === true){\r\n            console.log(\"true\")\r\n            callback(\"该系统路由已存在\")\r\n          }else if(res && res.data === false){\r\n            callback()\r\n          }\r\n        })\r\n      }\r\n      return {\r\n        sizeForm: {\r\n          name: '',\r\n          url: '',\r\n          component: '',\r\n          parentId:0\r\n        },\r\n        rules: {\r\n          name: [ { required: true, message: \"请输入系统名\", trigger: \"blur\" },\r\n            {validator:checkName, trigger: \"blur\"}\r\n          ],\r\n          url:[ { required: true, message: \"请输入系统路径\", trigger: \"blur\" },\r\n            {validator:checkUrl, trigger: \"blur\"}\r\n          ],\r\n        },\r\n\r\n        input2:'',\r\n        dialogSystem:false,\r\n        buttonStatue:true,\r\n        dialogVisible: false,\r\n        mid:'',\r\n        roleDate:[{\r\n          id:'',\r\n          name:'',\r\n          nameZh:''\r\n        }],\r\n        tableData:[{\r\n          id:'',\r\n          name:'',\r\n          url:'',\r\n          component:''\r\n        }],\r\n\r\n      }\r\n    },\r\n    methods: {\r\n      handleNewAdd(scope){\r\n        this.dialogSystem = true\r\n        this.sizeForm.parentId = scope.id\r\n      },\r\n      onSubmit(){\r\n        let params = {\r\n          'name':this.sizeForm.name,\r\n          'url':this.sizeForm.url,\r\n          'component':this.sizeForm.component,\r\n          'parentId':this.sizeForm.parentId\r\n        }\r\n        addMenu(params).then(res =>{\r\n          if (res.data === true){\r\n            this.$message({\r\n              message: '添加成功',\r\n              type: 'success'\r\n            })\r\n            this.send()\r\n          }else {\r\n            this.$message({\r\n              message: '添加失败',\r\n              type: 'warning'\r\n            })\r\n          }\r\n        })\r\n      },\r\n      handleAddSystem(){\r\n        this.dialogSystem = true\r\n        this.sizeForm.parentId = 0\r\n      },\r\n      authority(scope){\r\n        const _this = this\r\n        let param = {\r\n          'menuId': this.mid,\r\n          'roleId': scope.id\r\n        }\r\n        addAuthority(param).then(res=>{\r\n          if (res.data === true){\r\n            this.$message({\r\n              message: '分配成功',\r\n              type: 'success'\r\n            })\r\n            listRoleByMid(_this.mid).then(res =>{\r\n              _this.roleDate = res.data\r\n            })\r\n          }else {\r\n            this.$message({\r\n              message: '分配失败',\r\n              type: 'error'\r\n            })\r\n          }\r\n        })\r\n      },\r\n      handleRoleSearch(){\r\n        const _this = this\r\n        this.buttonStatue = false\r\n        searchRoleByName(_this.input2).then(res =>{\r\n          _this.roleDate = res.data\r\n        })\r\n      },\r\n      distribution(scope){\r\n        const _this = this\r\n        this.dialogVisible = true\r\n        listRoleByMid(scope.id).then(res =>{\r\n          _this.mid=scope.id\r\n          _this.roleDate = res.data\r\n        })\r\n      },\r\n      send () {\r\n        const _this = this\r\n        listMenu().then(res => {\r\n          _this.tableData = res.data\r\n          console.log(this.tableData)\r\n          console.log(res)\r\n        })\r\n      },\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n  .time {\r\n    font-size: 13px;\r\n    color: #999;\r\n  }\r\n\r\n  .bottom {\r\n    margin-top: 13px;\r\n    line-height: 12px;\r\n  }\r\n\r\n  .button {\r\n    padding: 0;\r\n    float: right;\r\n  }\r\n\r\n  .image {\r\n    width: 100%;\r\n    display: block;\r\n  }\r\n\r\n  .clearfix:before,\r\n  .clearfix:after {\r\n    display: table;\r\n    content: \"\";\r\n  }\r\n\r\n  .clearfix:after {\r\n    clear: both\r\n  }\r\n</style>\r\n"]}]}