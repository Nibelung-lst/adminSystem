{"remainingRequest":"C:\\ttt6-luckinsho2\\admin-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\ttt6-luckinsho2\\admin-web\\src\\components\\marketing\\Advertisement.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\ttt6-luckinsho2\\admin-web\\src\\components\\marketing\\Advertisement.vue","mtime":1573545730558},{"path":"C:\\ttt6-luckinsho2\\admin-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\ttt6-luckinsho2\\admin-web\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\ttt6-luckinsho2\\admin-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\ttt6-luckinsho2\\admin-web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBnZXRBZHZlcnRpc2VtZW50TGlzdCxjaGFuZ2VBZHZlcnRpc2VtZW50U3RhdHVzLGVkaXRBZHZlcnRpc2VtZW50IH0gZnJvbSAnQC9hcGkvbWFya2V0aW5nJw0KaW1wb3J0IHsgZm9ybWF0RGF0ZSB9IGZyb20gJ0AvdXRpbHMvZGF0ZScNCg0KZXhwb3J0IGRlZmF1bHQgew0KICBjcmVhdGVkICgpIHsNCiAgICB0aGlzLmhhbmRsZUdldEFkdmVydGlzZW1lbnRMaXN0KCkNCiAgfSwNCiAgbW91bnRlZCAoKSB7DQogIH0sDQogIGZpbHRlcnM6IHsNCiAgICBmb3JtYXRMb2NhdGlvbiAobG9jYXRpb24pIHsNCiAgICAgIGlmIChsb2NhdGlvbiA9PT0gMSkgew0KICAgICAgICByZXR1cm4gJ+Wwj+eoi+W6j+mmlumhtei9ruaSrScNCiAgICAgIH0gZWxzZSBpZiAobG9jYXRpb24gPT09IDIpIHsNCiAgICAgICAgcmV0dXJuICdQQ+mmlumhtei9ruaSrScNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHJldHVybiAn5YW25LuWJw0KICAgICAgfQ0KICAgIH0sDQogICAgZm9ybWF0RGF0ZSAodGltZSkgew0KICAgICAgaWYgKHRpbWUgPT0gbnVsbCB8fCB0aW1lID09PSAnJykgew0KICAgICAgICByZXR1cm4gJ04vQScNCiAgICAgIH0NCiAgICAgIGxldCBkYXRlID0gbmV3IERhdGUodGltZSkNCiAgICAgIHJldHVybiBmb3JtYXREYXRlKGRhdGUsICd5eXl5LU1NLWRkIG1tOnNzJykNCiAgICB9LA0KICAgIGZvcm1hdFN0YXR1cyAoc3RhdHVzKSB7DQogICAgICBpZiAoc3RhdHVzID09PSAxKSB7DQogICAgICAgIHJldHVybiAn5bey5LiK57q/Jw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgcmV0dXJuICfkuIvnur8nDQogICAgICB9DQogICAgfSwNCiAgICBmb3JtYXRFeHBpcmUgKGVuZFRpbWUpIHsNCiAgICAgIGxldCBub3cgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKQ0KICAgICAgbGV0IGVuZERhdGUgPSBuZXcgRGF0ZShlbmRUaW1lKQ0KICAgICAgaWYgKGVuZERhdGUgPiBub3cpIHsNCiAgICAgICAgcmV0dXJuICfmnKrov4fmnJ8nDQogICAgICB9IGVsc2Ugew0KICAgICAgICByZXR1cm4gJ+W3sui/h+acnycNCiAgICAgIH0NCiAgICB9DQogIH0sDQogIGRhdGEgKCkgew0KICAgIHJldHVybiB7DQogICAgICAgIGJhc2VVcmw6J2h0dHA6Ly8xMC4xMDQuMTMxLjE2MC8nLA0KICAgICAgbG9jYXRpb25PcHRpb25zOiBbDQogICAgICAgIHsNCiAgICAgICAgICBsYWJlbDogJ+Wwj+eoi+W6j+mmlumhtei9ruaSrScsDQogICAgICAgICAgdmFsdWU6IDENCiAgICAgICAgfSwNCiAgICAgICAgew0KICAgICAgICAgIGxhYmVsOiAnUEPpppbpobXova7mkq0nLA0KICAgICAgICAgIHZhbHVlOiAyDQogICAgICAgIH0sDQogICAgICAgIHsNCiAgICAgICAgICBsYWJlbDogJ+WFtuS7licsDQogICAgICAgICAgdmFsdWU6IDMNCiAgICAgICAgfQ0KICAgICAgXSwNCiAgICAgIHN0YXR1c09wdGlvbnM6IFsNCiAgICAgICAgew0KICAgICAgICAgIGxhYmVsOiAn5bey5LiK57q/JywNCiAgICAgICAgICB2YWx1ZTogMQ0KICAgICAgICB9LA0KICAgICAgICB7DQogICAgICAgICAgbGFiZWw6ICfkuIvnur8nLA0KICAgICAgICAgIHZhbHVlOiAyDQogICAgICAgIH0NCiAgICAgIF0sDQogICAgICAvLyDmkJzntKLmoI8NCiAgICAgIG5hbWU6ICcnLA0KICAgICAgLy8g5LyY5oOg5Yi45pWw57uEDQogICAgICBhZHZlcnRpc2VtZW50TGlzdDogW10sDQogICAgICBxdWVyeVBhcmFtczogew0KICAgICAgICBwYWdlTnVtOiAxLA0KICAgICAgICBwYWdlU2l6ZTogNSwNCiAgICAgICAgbmFtZTogJycsDQogICAgICAgIGxvY2F0aW9uOiBudWxsLA0KICAgICAgICBzdGF0dXM6IG51bGwNCiAgICAgIH0sDQogICAgICBhZGRDb3Vwb25Gb3JtOiB7fSwNCiAgICAgIC8vIOavj+mhteWHoOadoeaVsOaNrg0KICAgICAgcGFnZVNpemU6IDUsDQogICAgICAvLyDmgLvmlbANCiAgICAgIHRvdGFsOiAwLA0KICAgICAgLy8g5b2T5YmN6aG1DQogICAgICBjdXJyZW50UGFnZTogMSwNCiAgICAgIGVkaXREaWFsb2dWaXNpYmxlOiBmYWxzZSwNCiAgICAgIGVkaXRGb3JtOnt9LA0KICAgICAgICBjaGFuZ2VJbWFnZVZpc2libGU6ZmFsc2UNCiAgICB9DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICAgIGhhbmRsZUltYWdlU3VjY2VzcyhyZXNwb25zZSkgew0KICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKQ0KICAgICAgICAgIHRoaXMuZWRpdEZvcm0uaW1hZ2UgPSByZXNwb25zZS5kYXRhOw0KICAgICAgfSwNCiAgICAgIGJlZm9yZUltYWdlVXBsb2FkKGZpbGUpIHsNCiAgICAgICAgICAvKmNvbnNvbGUubG9nKCLnoa7lrprlm77niYfmoLzlvI/lj4rlpKflsI8iKQ0KICAgICAgICAgIGNvbnN0IGlzSlBHID0gZmlsZS50eXBlID09PSAnaW1hZ2UvanBlZyc7Ki8NCiAgICAgICAgICBjb25zdCBpc0x0Mk0gPSBmaWxlLnNpemUgLyAxMDI0IC8gMTAyNCA8IDI7DQogICAgICAgICAgaWYgKCFpc0x0Mk0pIHsNCiAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign5LiK5Lyg5Zu+54mH5aSn5bCP5LiN6IO96LaF6L+HIDJNQiEnKTsNCiAgICAgICAgICB9DQogICAgICAgICAgcmV0dXJuIGlzTHQyTTsNCiAgICAgIH0sDQogICAgICBoYW5kbGVQcmV2aWV3KGZpbGUpIHsNCiAgICAgICAgICBjb25zb2xlLmxvZyhmaWxlKTsNCiAgICAgIH0sDQogICAgICBoYW5kbGVFZGl0KGluZGV4LCByb3cpew0KICAgICAgICAgIHRoaXMuZWRpdEZvcm09ew0KICAgICAgICAgICAgICBpZDpyb3cuaWQsDQogICAgICAgICAgICAgIG5hbWU6cm93Lm5hbWUsDQogICAgICAgICAgICAgIGxvY2F0aW9uOnJvdy5sb2NhdGlvbiwNCiAgICAgICAgICAgICAgc2t1Q29kZTpyb3cuc2t1Q29kZSwNCiAgICAgICAgICAgICAgaW1hZ2U6cm93LmltYWdlLA0KICAgICAgICAgICAgICBub3RlOnJvdy5ub3RlLA0KICAgICAgICAgICAgICBzdGF0dXM6cm93LnN0YXR1cywNCiAgICAgICAgICAgICAgc29ydDpyb3cuc29ydCwNCiAgICAgICAgICAgICAgc3RhcnRUaW1lOnJvdy5zdGFydFRpbWUsDQogICAgICAgICAgICAgIGVuZFRpbWU6cm93LmVuZFRpbWUNCiAgICAgICAgICB9DQogICAgICAgICAgdGhpcy5lZGl0RGlhbG9nVmlzaWJsZSA9IHRydWUNCiAgICAgIH0sDQogICAgICBoYW5kbGVTYXZlRWRpdCgpew0KICAgICAgICAgIGxldCBwYXJhbXMgPSB0aGlzLmVkaXRGb3JtOw0KICAgICAgICAgIGNvbnNvbGUubG9nKHBhcmFtcykNCiAgICAgICAgICBlZGl0QWR2ZXJ0aXNlbWVudChwYXJhbXMpLnRoZW4ocmVzID0+IHsNCiAgICAgICAgICAgICAgaWYgKHJlcy5jb2RlID09PSAwKSB7DQogICAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsNCiAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAn5L+u5pS55oiQ5YqfJywNCiAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycNCiAgICAgICAgICAgICAgICAgIH0pDQoNCiAgICAgICAgICAgICAgICAgIHRoaXMuZWRpdEZvcm0gPSB7fQ0KICAgICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVHZXRBZHZlcnRpc2VtZW50TGlzdCgpOw0KICAgICAgICAgICAgICAgICAgdGhpcy5lZGl0RGlhbG9nVmlzaWJsZSA9IGZhbHNlDQogICAgICAgICAgICAgIH0NCiAgICAgICAgICB9KQ0KICAgICAgfSwNCiAgICAvLyDmr4/pobXlh6DmnaHmlbDmja7lj5jljJYNCiAgICBoYW5kbGVTaXplQ2hhbmdlICh2YWwpIHsNCiAgICAgIHRoaXMucGFnZVNpemUgPSB2YWwNCiAgICB9LA0KICAgIC8vIOW9k+WJjemhteWPmOWMlg0KICAgIGhhbmRsZUN1cnJlbnRDaGFuZ2UgKHZhbCkgew0KICAgICAgdGhpcy5jdXJyZW50UGFnZSA9IHZhbA0KICAgICAgdGhpcy5oYW5kbGVHZXRBZHZlcnRpc2VtZW50TGlzdCgpDQogICAgfSwNCiAgICAvLyDmn6Xor6LmjInpkq4NCiAgICBoYW5kbGVTZWFyY2ggKCkgew0KICAgICAgdGhpcy5jdXJyZW50UGFnZSA9IDENCiAgICAgIHRoaXMuaGFuZGxlR2V0QWR2ZXJ0aXNlbWVudExpc3QoKQ0KICAgIH0sDQogICAgICBoYW5kbGVDaGFuZ2VTdGF0dXMoaW5kZXgscm93KXsNCiAgICAgICAgbGV0IHBhcmFtcz0iaWQ9Iityb3cuaWQNCiAgICAgICAgICBjaGFuZ2VBZHZlcnRpc2VtZW50U3RhdHVzKHBhcmFtcykudGhlbihyZXM9PnsNCiAgICAgICAgICAgICAgaWYocmVzLmNvZGU9PT0wKXsNCiAgICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uoew0KICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICfkv67mlLnmiJDlip8nLA0KICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJw0KICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlR2V0QWR2ZXJ0aXNlbWVudExpc3QoKTsNCiAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uoew0KICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICfkv67mlLnlpLHotKUnLA0KICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdmYWlsJw0KICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgIH0pDQoNCiAgICAgIH0sDQoNCiAgICAvLyDojrflj5blub/lkYrliJfooagNCiAgICBoYW5kbGVHZXRBZHZlcnRpc2VtZW50TGlzdCAoKSB7DQogICAgICB0aGlzLnF1ZXJ5UGFyYW1zLnBhZ2VOdW0gPSB0aGlzLmN1cnJlbnRQYWdlDQogICAgICB0aGlzLnF1ZXJ5UGFyYW1zLnBhZ2VTaXplID0gdGhpcy5wYWdlU2l6ZQ0KICAgICAgZ2V0QWR2ZXJ0aXNlbWVudExpc3QodGhpcy5xdWVyeVBhcmFtcykudGhlbihyZXMgPT4gew0KICAgICAgICBpZiAocmVzLmNvZGUgPT09IDApIHsNCiAgICAgICAgICAgIGxldCBsaXN0ID0gcmVzLmRhdGEuY29udGVudDsNCiAgICAgICAgICAgIGZvciAobGV0IGk9MDtpPGxpc3QubGVuZ3RoO2krKyl7DQogICAgICAgICAgICAgICAgbGlzdFtpXS5pbWFnZSA9IHRoaXMuYmFzZVVybCtsaXN0W2ldLmltYWdlDQogICAgICAgICAgICB9DQogICAgICAgICAgdGhpcy5hZHZlcnRpc2VtZW50TGlzdCA9IGxpc3QNCiAgICAgICAgICBjb25zb2xlLmxvZyhsaXN0KQ0KICAgICAgICAgIHRoaXMudG90YWwgPSByZXMuZGF0YS5jb3VudA0KICAgICAgICB9DQogICAgICB9KQ0KICAgIH0NCg0KICB9DQp9DQo="},{"version":3,"sources":["Advertisement.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+LA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"Advertisement.vue","sourceRoot":"src/components/marketing","sourcesContent":["<template>\r\n  <div>\r\n    <!--导航栏-->\r\n    <el-row :gutter=\"12\">\r\n      <el-col :span=\"24\">\r\n        <el-card shadow=\"always\">\r\n          <el-row :gutter=\"12\">\r\n            <el-col :span=\"4\">\r\n              <el-breadcrumb separator-class=\"el-icon-arrow-right\">\r\n                <el-breadcrumb-item :to=\"{ path: '/' }\">首页</el-breadcrumb-item>\r\n                <el-breadcrumb-item>广告列表</el-breadcrumb-item>\r\n              </el-breadcrumb>\r\n            </el-col>\r\n          </el-row>\r\n        </el-card>\r\n      </el-col>\r\n    </el-row>\r\n    <!--搜索栏-->\r\n    <el-row :gutter=\"12\" style=\"margin-top: 20px\">\r\n      <el-col :span=\"24\">\r\n        <el-card shadow=\"always\">\r\n          <el-row>\r\n            <el-col>\r\n              <el-form :inline=\"true\" :model=\"queryParams\" size=\"small\" label-width=\"140px\">\r\n                <el-form-item label=\"广告名称：\">\r\n                  <el-input v-model=\"queryParams.name\" class=\"input-width\" placeholder=\"优惠券名称\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"广告位置：\">\r\n                  <el-select v-model=\"queryParams.location\" placeholder=\"全部\" clearable class=\"input-width\">\r\n                    <el-option v-for=\"item in locationOptions\"\r\n                               :key=\"item.value\"\r\n                               :label=\"item.label\"\r\n                               :value=\"item.value\">\r\n                    </el-option>\r\n                  </el-select>\r\n                </el-form-item>\r\n                <el-form-item label=\"广告状态：\">\r\n                  <el-select v-model=\"queryParams.status\" placeholder=\"全部\" clearable class=\"input-width\">\r\n                    <el-option v-for=\"item in statusOptions\"\r\n                               :key=\"item.value\"\r\n                               :label=\"item.label\"\r\n                               :value=\"item.value\">\r\n                    </el-option>\r\n                  </el-select>\r\n                </el-form-item>\r\n                <el-form-item>\r\n                  <el-button @click=\"handleSearch\" type=\"primary\">查询</el-button>\r\n                </el-form-item>\r\n              </el-form>\r\n            </el-col>\r\n          </el-row>\r\n        </el-card>\r\n      </el-col>\r\n    </el-row>\r\n    <!--数据表格-->\r\n    <el-row :gutter=\"12\" style=\"margin-top: 20px\">\r\n      <el-col :span=\"24\">\r\n        <el-table\r\n          :data=\"advertisementList\"\r\n          style=\"width: 100%\"\r\n          tooltip-effect=\"dark\">\r\n          <el-table-column\r\n            align=\"center\"\r\n            label=\"编号\" width=\"100\">\r\n            <template slot-scope=\"scope\">{{ scope.row.id }}</template>\r\n          </el-table-column>\r\n          <el-table-column label=\"广告名称\" align=\"center\" width=\"150\">\r\n            <template slot-scope=\"scope\">{{scope.row.name}}</template>\r\n          </el-table-column>\r\n          <el-table-column label=\"广告位置\" width=\"100\" align=\"center\">\r\n            <template slot-scope=\"scope\">{{scope.row.location | formatLocation}}</template>\r\n          </el-table-column>\r\n          <el-table-column label=\"广告图片\" width=\"150\" align=\"center\">\r\n            <template slot-scope=\"scope\"><img style=\"height: 80px\" :src=\"scope.row.image\"></template>\r\n          </el-table-column>\r\n          <el-table-column label=\"有效期\" width=\"250\" align=\"center\">\r\n            <template slot-scope=\"scope\">{{scope.row.startTime |formatDate}}至{{scope.row.endTime |formatDate}}</template>\r\n          </el-table-column>\r\n          <el-table-column label=\"上下线\" width=\"100\" align=\"center\">\r\n            <template slot-scope=\"scope\">{{scope.row.status | formatStatus}}</template>\r\n          </el-table-column>\r\n          <el-table-column\r\n            align=\"center\"\r\n            label=\"操作\">\r\n            <template slot-scope=\"scope\">\r\n              <el-button type=\"primary\" plain size=\"small\" @click=\"handleEdit(scope.$index,scope.row)\">编辑</el-button>\r\n                <el-button type=\"danger\" plain size=\"small\" v-if=\"scope.row.status == 1\" @click=\"handleChangeStatus(scope.$index,scope.row)\">下线</el-button>\r\n              <el-button type=\"danger\" plain size=\"small\" v-if=\"scope.row.status == 2\" @click=\"handleChangeStatus(scope.$index,scope.row)\">上线</el-button>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n      </el-col>\r\n    </el-row>\r\n    <el-dialog>\r\n\r\n    </el-dialog>\r\n    <!--分页-->\r\n    <el-row :gutter=\"12\" style=\"margin-top: 20px\">\r\n      <el-col :span=\"24\">\r\n        <el-card shadow=\"always\">\r\n          <el-row :gutter=\"12\">\r\n            <el-col :offset=\"10\" :span=\"12\">\r\n              <div class=\"block\">\r\n                <el-pagination\r\n                  :current-page=currentPage\r\n                  :page-size=pageSize\r\n                  :page-sizes=\"[1, 5, 10, 15, 20, 30]\"\r\n                  :total=total\r\n                  @current-change=\"handleCurrentChange\"\r\n                  @size-change=\"handleSizeChange\"\r\n                  background\r\n                  layout=\"total, sizes, prev, pager, next, jumper\">\r\n                </el-pagination>\r\n              </div>\r\n            </el-col>\r\n          </el-row>\r\n        </el-card>\r\n      </el-col>\r\n    </el-row>\r\n    <el-dialog title=\"编辑广告\" :visible.sync=\"editDialogVisible\" style=\"text-align: left\">\r\n      <el-form :model=\"editForm\"\r\n               :rules=\"rules\"\r\n               ref=\"couponFrom\"\r\n               label-width=\"150px\"\r\n               size=\"small\">\r\n        <el-form-item label=\"广告位置：\">\r\n          <el-select v-model=\"editForm.location\" collapse-tags>\r\n            <el-option\r\n              v-for=\"type in locationOptions\"\r\n              :key=\"type.value\"\r\n              :label=\"type.label\"\r\n              :value=\"type.value\">\r\n            </el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"名称：\" prop=\"name\">\r\n          <el-input v-model=\"editForm.name\" class=\"input-width\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"有效期：\">\r\n          <el-date-picker type=\"datetime\" placeholder=\"选择日期\" v-model=\"editForm.startTime\" style=\"width: 150px\"></el-date-picker>\r\n          <span style=\"margin-left: 20px;margin-right: 20px\">至</span>\r\n          <el-date-picker type=\"datetime\" placeholder=\"选择日期\" v-model=\"editForm.endTime\" style=\"width: 150px\"></el-date-picker>\r\n        </el-form-item>\r\n        <el-form-item label=\"广告图片：\" v-model=\"editForm.image\">\r\n          <img style=\"height: 80px\" :src=\"editForm.image\">\r\n          <el-button type=\"text\" style=\"margin-top:-30px\" @click=\"changeImageVisible=true\">修改图片</el-button>\r\n        </el-form-item>\r\n        <el-form-item label=\"排序：\" prop = \"sort\">\r\n          <el-input v-model=\"editForm.sort\" class=\"input-width\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"广告链接：\" prop=\"url\">\r\n          <el-input v-model=\"editForm.skuCode\" class=\"input-width\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"是否上线\" >\r\n          <el-radio-group v-model=\"editForm.status\">\r\n            <el-radio :label=\"1\">是</el-radio>\r\n            <el-radio :label=\"2\">否</el-radio>\r\n          </el-radio-group>\r\n        </el-form-item>\r\n        <el-form-item label=\"备注：\">\r\n          <el-input\r\n            class=\"input-width\"\r\n            type=\"textarea\"\r\n            :rows=\"5\"\r\n            placeholder=\"请输入内容\"\r\n            v-model=\"editForm.note\">\r\n          </el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\" style=\"text-align: center\">\r\n        <el-button @click=\"editDialogVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"handleSaveEdit()\">保存修改</el-button>\r\n      </div>\r\n    </el-dialog>\r\n    <el-dialog title=\"点击修改图片\" :visible.sync=\"changeImageVisible\">\r\n      <el-upload\r\n        class=\"avatar-uploader\"\r\n        action=\"http://adminweb.luckinshop.com:8080/adminback/uploadImage\"\r\n        :show-file-list=\"false\"\r\n        :on-success=\"handleImageSuccess\"\r\n        :on-preview=\"handlePreview\"\r\n        :before-upload=\"beforeImageUpload\"\r\n        v-model=\"editForm.image\">\r\n        <img v-if=\"editForm.image\" :src=\"editForm.image\" class=\"avatar\" style=\"height: 80px\">\r\n        <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\r\n      </el-upload>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getAdvertisementList,changeAdvertisementStatus,editAdvertisement } from '@/api/marketing'\r\nimport { formatDate } from '@/utils/date'\r\n\r\nexport default {\r\n  created () {\r\n    this.handleGetAdvertisementList()\r\n  },\r\n  mounted () {\r\n  },\r\n  filters: {\r\n    formatLocation (location) {\r\n      if (location === 1) {\r\n        return '小程序首页轮播'\r\n      } else if (location === 2) {\r\n        return 'PC首页轮播'\r\n      } else {\r\n        return '其他'\r\n      }\r\n    },\r\n    formatDate (time) {\r\n      if (time == null || time === '') {\r\n        return 'N/A'\r\n      }\r\n      let date = new Date(time)\r\n      return formatDate(date, 'yyyy-MM-dd mm:ss')\r\n    },\r\n    formatStatus (status) {\r\n      if (status === 1) {\r\n        return '已上线'\r\n      } else {\r\n        return '下线'\r\n      }\r\n    },\r\n    formatExpire (endTime) {\r\n      let now = new Date().getTime()\r\n      let endDate = new Date(endTime)\r\n      if (endDate > now) {\r\n        return '未过期'\r\n      } else {\r\n        return '已过期'\r\n      }\r\n    }\r\n  },\r\n  data () {\r\n    return {\r\n        baseUrl:'http://10.104.131.160/',\r\n      locationOptions: [\r\n        {\r\n          label: '小程序首页轮播',\r\n          value: 1\r\n        },\r\n        {\r\n          label: 'PC首页轮播',\r\n          value: 2\r\n        },\r\n        {\r\n          label: '其他',\r\n          value: 3\r\n        }\r\n      ],\r\n      statusOptions: [\r\n        {\r\n          label: '已上线',\r\n          value: 1\r\n        },\r\n        {\r\n          label: '下线',\r\n          value: 2\r\n        }\r\n      ],\r\n      // 搜索栏\r\n      name: '',\r\n      // 优惠券数组\r\n      advertisementList: [],\r\n      queryParams: {\r\n        pageNum: 1,\r\n        pageSize: 5,\r\n        name: '',\r\n        location: null,\r\n        status: null\r\n      },\r\n      addCouponForm: {},\r\n      // 每页几条数据\r\n      pageSize: 5,\r\n      // 总数\r\n      total: 0,\r\n      // 当前页\r\n      currentPage: 1,\r\n      editDialogVisible: false,\r\n      editForm:{},\r\n        changeImageVisible:false\r\n    }\r\n  },\r\n  methods: {\r\n      handleImageSuccess(response) {\r\n          console.log(response)\r\n          this.editForm.image = response.data;\r\n      },\r\n      beforeImageUpload(file) {\r\n          /*console.log(\"确定图片格式及大小\")\r\n          const isJPG = file.type === 'image/jpeg';*/\r\n          const isLt2M = file.size / 1024 / 1024 < 2;\r\n          if (!isLt2M) {\r\n              this.$message.error('上传图片大小不能超过 2MB!');\r\n          }\r\n          return isLt2M;\r\n      },\r\n      handlePreview(file) {\r\n          console.log(file);\r\n      },\r\n      handleEdit(index, row){\r\n          this.editForm={\r\n              id:row.id,\r\n              name:row.name,\r\n              location:row.location,\r\n              skuCode:row.skuCode,\r\n              image:row.image,\r\n              note:row.note,\r\n              status:row.status,\r\n              sort:row.sort,\r\n              startTime:row.startTime,\r\n              endTime:row.endTime\r\n          }\r\n          this.editDialogVisible = true\r\n      },\r\n      handleSaveEdit(){\r\n          let params = this.editForm;\r\n          console.log(params)\r\n          editAdvertisement(params).then(res => {\r\n              if (res.code === 0) {\r\n                  this.$message({\r\n                      message: '修改成功',\r\n                      type: 'success'\r\n                  })\r\n\r\n                  this.editForm = {}\r\n                  this.handleGetAdvertisementList();\r\n                  this.editDialogVisible = false\r\n              }\r\n          })\r\n      },\r\n    // 每页几条数据变化\r\n    handleSizeChange (val) {\r\n      this.pageSize = val\r\n    },\r\n    // 当前页变化\r\n    handleCurrentChange (val) {\r\n      this.currentPage = val\r\n      this.handleGetAdvertisementList()\r\n    },\r\n    // 查询按钮\r\n    handleSearch () {\r\n      this.currentPage = 1\r\n      this.handleGetAdvertisementList()\r\n    },\r\n      handleChangeStatus(index,row){\r\n        let params=\"id=\"+row.id\r\n          changeAdvertisementStatus(params).then(res=>{\r\n              if(res.code===0){\r\n                  this.$message({\r\n                      message: '修改成功',\r\n                      type: 'success'\r\n                  })\r\n                  this.handleGetAdvertisementList();\r\n              } else {\r\n                  this.$message({\r\n                      message: '修改失败',\r\n                      type: 'fail'\r\n                  })\r\n              }\r\n          })\r\n\r\n      },\r\n\r\n    // 获取广告列表\r\n    handleGetAdvertisementList () {\r\n      this.queryParams.pageNum = this.currentPage\r\n      this.queryParams.pageSize = this.pageSize\r\n      getAdvertisementList(this.queryParams).then(res => {\r\n        if (res.code === 0) {\r\n            let list = res.data.content;\r\n            for (let i=0;i<list.length;i++){\r\n                list[i].image = this.baseUrl+list[i].image\r\n            }\r\n          this.advertisementList = list\r\n          console.log(list)\r\n          this.total = res.data.count\r\n        }\r\n      })\r\n    }\r\n\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n  .input-width {\r\n    width: 203px;\r\n  }\r\n</style>\r\n"]}]}