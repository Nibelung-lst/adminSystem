{"remainingRequest":"C:\\ttt6-luckinsho2\\admin-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\ttt6-luckinsho2\\admin-web\\src\\components\\marketing\\AddCoupon.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\ttt6-luckinsho2\\admin-web\\src\\components\\marketing\\AddCoupon.vue","mtime":1572953868607},{"path":"C:\\ttt6-luckinsho2\\admin-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\ttt6-luckinsho2\\admin-web\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\ttt6-luckinsho2\\admin-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\ttt6-luckinsho2\\admin-web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBhZGRDb3Vwb24gfSBmcm9tICcuLi8uLi9hcGkvbWFya2V0aW5nJw0KDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICdBZGRDb3Vwb24nLA0KICBkYXRhICgpIHsNCiAgICByZXR1cm4gew0KICAgICAgdXNlVHlwZU9wdGlvbnM6IFsNCiAgICAgICAgew0KICAgICAgICAgIGxhYmVsOiAn5YWo5ZOB57G7JywNCiAgICAgICAgICB2YWx1ZTogMQ0KICAgICAgICB9LA0KICAgICAgICB7DQogICAgICAgICAgbGFiZWw6ICfmjIflrprliIbnsbsnLA0KICAgICAgICAgIHZhbHVlOiAyDQogICAgICAgIH0sDQogICAgICAgIHsNCiAgICAgICAgICBsYWJlbDogJ+aMh+WumuWVhuWTgScsDQogICAgICAgICAgdmFsdWU6IDMNCiAgICAgICAgfQ0KICAgICAgXSwNCiAgICAgIHR5cGVPcHRpb25zOiBbDQogICAgICAgIHsNCiAgICAgICAgICBsYWJlbDogJ+eUqOaIt+WPr+mihuWPlicsDQogICAgICAgICAgdmFsdWU6IDENCiAgICAgICAgfSwNCiAgICAgICAgew0KICAgICAgICAgIGxhYmVsOiAn5LuF5ZCO5Y+w6LWg6YCBJywNCiAgICAgICAgICB2YWx1ZTogMg0KICAgICAgICB9LA0KICAgICAgICB7DQogICAgICAgICAgbGFiZWw6ICfotK3nianotaDpgIEnLA0KICAgICAgICAgIHZhbHVlOiAzDQogICAgICAgIH0NCiAgICAgIF0sDQogICAgICBzdGF0dXNPcHRpb25zOiBbDQogICAgICAgIHsNCiAgICAgICAgICBsYWJlbDogJ+S4iue6vycsDQogICAgICAgICAgdmFsdWU6IDENCiAgICAgICAgfSwNCiAgICAgICAgew0KICAgICAgICAgIGxhYmVsOiAn5LiL57q/JywNCiAgICAgICAgICB2YWx1ZTogMg0KICAgICAgICB9DQogICAgICBdLA0KICAgICAgYWRkQ291cG9uRm9ybToge30sDQogICAgICBzZWxlY3RDYXRlZ29yeToge30sDQogICAgICBzZWxlY3RQcm9kdWN0OiB7fSwNCiAgICAgIGNhdGVnb3J5T3B0aW9uczogW10sDQogICAgICBsb2FkaW5nOiBmYWxzZSwNCiAgICAgIHNlbGVjdFByb2R1Y3RPcHRpb25zOiBbXQ0KDQogICAgfQ0KICB9LA0KICBtZXRob2RzOiB7DQogICAgaGFuZGxlU3VibWl0ICgpIHsNCiAgICAgIGxldCBwYXJhbXMgPSB0aGlzLmFkZENvdXBvbkZvcm0NCiAgICAgIGNvbnNvbGUubG9nKCdra2FuJykNCiAgICAgIGNvbnNvbGUubG9nKHBhcmFtcykNCiAgICAgIGFkZENvdXBvbihwYXJhbXMpLnRoZW4ocmVzID0+IHsNCiAgICAgICAgaWYgKHJlcy5jb2RlID09PSAwKSB7DQogICAgICAgICAgdGhpcy4kbWVzc2FnZSh7DQogICAgICAgICAgICBtZXNzYWdlOiAn5paw5aKe5oiQ5YqfJywNCiAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJw0KICAgICAgICAgIH0pDQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgdGhpcy4kbWVzc2FnZSh7DQogICAgICAgICAgICBtZXNzYWdlOiAn5re75Yqg5aSx6LSlJywNCiAgICAgICAgICAgIHR5cGU6ICdmYWlsJw0KICAgICAgICAgIH0pDQogICAgICAgIH0NCiAgICAgIH0pDQogICAgfSwNCiAgICBzZWFyY2hQcm9kdWN0TWV0aG9kIChxdWVyeSkgew0KICAgICAgaWYgKHF1ZXJ5ICE9PSAnJykgew0KICAgICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlDQogICAgICAgIC8vIOmAmui/h+WVhuWTgeWQjeensOaIlnNwdUNvZGXmkJzntKLllYblk4ENCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHRoaXMuc2VsZWN0UHJvZHVjdE9wdGlvbnMgPSBbXQ0KICAgICAgfQ0KICAgIH0sDQogICAgaGFuZGxlQWRkQ2F0ZWdvcnkgKCkgew0KICAgICAgdGhpcy5hZGRDb3Vwb25Gb3JtLnVzZVJhbmdlQ29kZSA9IHRoaXMuc2VsZWN0Q2F0ZWdvcnkuY2F0ZWdvcnlDb2RlDQogICAgICB0aGlzLmFkZENvdXBvbkZvcm0udXNlUmFuZ2VOYW1lID0gdGhpcy5zZWxlY3RDYXRlZ29yeS5jYXRlZ29yeU5hbWUNCiAgICAgIHRoaXMuc2VsZWN0Q2F0ZWdvcnkgPSB7fQ0KICAgIH0sDQogICAgaGFuZGxlQWRkUHJvZHVjdCAoKSB7DQogICAgICB0aGlzLmFkZENvdXBvbkZvcm0udXNlUmFuZ2VDb2RlID0gdGhpcy5zZWxlY3RQcm9kdWN0LnNwdUNvZGUNCiAgICAgIHRoaXMuYWRkQ291cG9uRm9ybS51c2VSYW5nZU5hbWUgPSB0aGlzLnNlbGVjdFByb2R1Y3QubmFtZQ0KICAgICAgdGhpcy5zZWxlY3RQcm9kdWN0ID0ge30NCiAgICB9DQogIH0NCn0NCg=="},{"version":3,"sources":["AddCoupon.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AddCoupon.vue","sourceRoot":"src/components/marketing","sourcesContent":["<template>\r\n  <el-card class=\"form-container\" shadow=\"never\">\r\n    <el-form :model=\"addCouponForm\"\r\n             :rules=\"rules\"\r\n             ref=\"couponFrom\"\r\n             label-width=\"150px\"\r\n             size=\"small\">\r\n      <el-form-item label=\"优惠券类型：\">\r\n        <el-select v-model=\"addCouponForm.useType\" collapse-tags>\r\n          <el-option\r\n            v-for=\"type in useTypeOptions\"\r\n            :key=\"type.value\"\r\n            :label=\"type.label\"\r\n            :value=\"type.value\">\r\n          </el-option>\r\n        </el-select>\r\n      </el-form-item>\r\n      <el-form-item label=\"优惠券名称：\" prop=\"name\">\r\n        <el-input v-model=\"addCouponForm.name\" class=\"input-width\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"发券类型：\">\r\n        <el-select v-model=\"addCouponForm.sendType\">\r\n          <el-option\r\n            v-for=\"item in typeOptions\"\r\n            :key=\"item.value\"\r\n            :label=\"item.label\"\r\n            :value=\"item.value\">\r\n          </el-option>\r\n        </el-select>\r\n      </el-form-item>\r\n      <el-form-item label=\"面额：\" prop=\"amount\">\r\n        <el-input v-model.number=\"addCouponForm.amount\" placeholder=\"\" class=\"input-width\">\r\n          <template slot=\"append\">元</template>\r\n        </el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"使用门槛：\" prop=\"minAmount\">\r\n        <el-input v-model.number=\"addCouponForm.minAmount\" placeholder=\"\" class=\"input-width\">\r\n          <template slot=\"prepend\">满</template>\r\n          <template slot=\"append\">元可用</template>\r\n        </el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"有效期：\">\r\n        <el-date-picker type=\"date\" placeholder=\"选择日期\" v-model=\"addCouponForm.startTime\" style=\"width: 150px\"></el-date-picker>\r\n        <span style=\"margin-left: 20px;margin-right: 20px\">至</span>\r\n        <el-date-picker type=\"date\" placeholder=\"选择日期\" v-model=\"addCouponForm.endTime\" style=\"width: 150px\"></el-date-picker>\r\n      </el-form-item>\r\n      <el-form-item label=\"可使用商品：\">\r\n        <el-radio-group v-model=\"addCouponForm.useType\">\r\n          <el-radio-button :label=\"1\">全场通用</el-radio-button>\r\n          <el-radio-button :label=\"2\">指定分类</el-radio-button>\r\n          <el-radio-button :label=\"3\">指定商品</el-radio-button>\r\n        </el-radio-group>\r\n      </el-form-item>\r\n      <el-form-item v-show=\"addCouponForm.useType===2\">\r\n        <el-cascader\r\n          clearable\r\n          placeholder=\"请选择分类名称\"\r\n          v-model=\"selectCategory\"\r\n          :options=\"categoryOptions\">\r\n        </el-cascader>\r\n        <el-button @click=\"handleAddCategory()\">添加</el-button>\r\n      </el-form-item>\r\n      <el-form-item v-show=\"addCouponForm.useType===3\">\r\n        <el-select\r\n          v-model=\"selectProduct\"\r\n          filterable\r\n          remote\r\n          reserve-keyword\r\n          placeholder=\"商品名称/商品货号\"\r\n          :remote-method=\"searchProductMethod\"\r\n          loading=\"loading\">\r\n          <el-option\r\n            v-for=\"item in selectProductOptions\"\r\n            :key=\"item.spuCode\"\r\n            :label=\"item.productName\"\r\n            :value=\"item.spuCode\">\r\n            <span style=\"float: left\">{{ item.productName }}</span>\r\n            <span style=\"float: right; color: #8492a6; font-size: 13px\">NO.{{ item.spuCode }}</span>\r\n          </el-option>\r\n        </el-select>\r\n        <el-button @click=\"handleAddProduct()\">添加</el-button>\r\n      </el-form-item>\r\n      <el-form-item label=\"是否发布\" >\r\n        <el-radio-group v-model=\"addCouponForm.status\">\r\n          <el-radio label=\"1\">是</el-radio>\r\n          <el-radio label=\"0\">否</el-radio>\r\n        </el-radio-group>\r\n      </el-form-item>\r\n      <el-form-item label=\"备注：\">\r\n        <el-input\r\n          class=\"input-width\"\r\n          type=\"textarea\"\r\n          :rows=\"5\"\r\n          placeholder=\"请输入内容\"\r\n          v-model=\"addCouponForm.note\">\r\n        </el-input>\r\n      </el-form-item>\r\n      <el-form-item>\r\n        <el-button type=\"primary\" @click=\"handleSubmit()\">提交</el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n  </el-card>\r\n</template>\r\n\r\n<script>\r\nimport { addCoupon } from '../../api/marketing'\r\n\r\nexport default {\r\n  name: 'AddCoupon',\r\n  data () {\r\n    return {\r\n      useTypeOptions: [\r\n        {\r\n          label: '全品类',\r\n          value: 1\r\n        },\r\n        {\r\n          label: '指定分类',\r\n          value: 2\r\n        },\r\n        {\r\n          label: '指定商品',\r\n          value: 3\r\n        }\r\n      ],\r\n      typeOptions: [\r\n        {\r\n          label: '用户可领取',\r\n          value: 1\r\n        },\r\n        {\r\n          label: '仅后台赠送',\r\n          value: 2\r\n        },\r\n        {\r\n          label: '购物赠送',\r\n          value: 3\r\n        }\r\n      ],\r\n      statusOptions: [\r\n        {\r\n          label: '上线',\r\n          value: 1\r\n        },\r\n        {\r\n          label: '下线',\r\n          value: 2\r\n        }\r\n      ],\r\n      addCouponForm: {},\r\n      selectCategory: {},\r\n      selectProduct: {},\r\n      categoryOptions: [],\r\n      loading: false,\r\n      selectProductOptions: []\r\n\r\n    }\r\n  },\r\n  methods: {\r\n    handleSubmit () {\r\n      let params = this.addCouponForm\r\n      console.log('kkan')\r\n      console.log(params)\r\n      addCoupon(params).then(res => {\r\n        if (res.code === 0) {\r\n          this.$message({\r\n            message: '新增成功',\r\n            type: 'success'\r\n          })\r\n        } else {\r\n          this.$message({\r\n            message: '添加失败',\r\n            type: 'fail'\r\n          })\r\n        }\r\n      })\r\n    },\r\n    searchProductMethod (query) {\r\n      if (query !== '') {\r\n        this.loading = true\r\n        // 通过商品名称或spuCode搜索商品\r\n      } else {\r\n        this.selectProductOptions = []\r\n      }\r\n    },\r\n    handleAddCategory () {\r\n      this.addCouponForm.useRangeCode = this.selectCategory.categoryCode\r\n      this.addCouponForm.useRangeName = this.selectCategory.categoryName\r\n      this.selectCategory = {}\r\n    },\r\n    handleAddProduct () {\r\n      this.addCouponForm.useRangeCode = this.selectProduct.spuCode\r\n      this.addCouponForm.useRangeName = this.selectProduct.name\r\n      this.selectProduct = {}\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n  .input-width {\r\n    width: 70%;\r\n  }\r\n  .form-container{\r\n    width: 60%;\r\n    margin-left: 20%;\r\n    text-align: left;\r\n  }\r\n</style>\r\n"]}]}